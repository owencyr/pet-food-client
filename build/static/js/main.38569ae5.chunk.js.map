{"version":3,"sources":["services/token-service.js","services/idle-service.js","contexts/FoodListContext.js","config.js","components/Header/Header.js","components/Utils/PrivateRoute.js","components/Utils/PublicOnlyRoute.js","components/Utils/Utils.js","services/auth-api-service.js","components/LoginForm/LoginForm.js","routes/LoginPage/LoginPage.js","components/RegistrationForm/RegistrationForm.js","routes/RegistrationPage/RegistrationPage.js","routes/NotFoundPage/NotFoundPage.js","services/food-api-service.js","services/ingredient-api-service.js","services/rating-api-service.js","components/RatingForm/RatingForm.js","components/FoodListItem/FoodListItem.js","routes/FoodList/FoodList.js","routes/SearchPage/SearchPage.js","routes/SignInPage/SignInPage.js","components/App/App.js","index.js"],"names":["_timeoutId","FoodListContext","React","createContext","foodList","ingredientsList","ratingsList","userRatedFoods","query","loggedIn","error","setError","clearError","setFoodList","setIngredientsList","setRatingsList","setUserRatedFoods","updateLoggedIn","FoodListProvider","_Component","_getPrototypeOf2","_this","Object","classCallCheck","this","_len","arguments","length","args","Array","_key","possibleConstructorReturn","getPrototypeOf","call","apply","concat","state","setState","setQuery","window","localStorage","getItem","console","inherits","createClass","key","value","react_default","a","createElement","Provider","props","children","Component","config","TokenService","saveAuthToken","token","setItem","saveUserMetadata","id","nickname","getAuthToken","clearAuthToken","removeItem","clearUserMetadata","hasAuthToken","makeBasicAuthToken","userName","password","btoa","parseJwt","jwt","jwtDecode","readJwtToken","_getMsUntilExpiry","payload","exp","Date","now","queueCallbackBeforeExpiry","callback","msUntilExpiry","setTimeout","clearCallbackBeforeExpiry","clearTimeout","_idleCallback","_notIdleEvents","IdleService","setIdleCallback","idleCallback","resetIdleTimer","ev","registerIdleTimerResets","forEach","event","document","addEventListener","unRegisterIdleResets","removeEventListener","Header","handleLogoutClick","context","formatNickName","charAt","toUpperCase","slice","className","react_router_dom","onClick","to","Fragment","renderLogoutLink","renderLoginLink","contextType","PrivateRoute","_ref","component","objectWithoutProperties","react_router","assign","render","componentProps","pathname","from","location","PublicOnlyRoute","Button","_ref2","join","Input","_ref4","Required","_ref5","Section","_ref6","list","classes","filter","Boolean","AuthApiService","postUser","user","fetch","method","headers","content-type","body","JSON","stringify","then","res","ok","json","e","Promise","reject","postLogin","user_name","authToken","user_id","postRefreshToken","authorization","catch","err","log","LoginForm","handleSubmitJwtAuth","preventDefault","_e$target","target","onLoginSuccess","onSubmit","role","htmlFor","required","name","type","defaultProps","LoginPage","handleLoginSuccess","_this$props","history","destination","push","LoginForm_LoginForm","RegistrationForm","handleSubmit","_ev$target","full_name","nick_name","onRegistrationSuccess","RegistrationPage","handleRegistrationSuccess","RegistrationForm_RegistrationForm","NotFoundPage","FoodApiService","getFoods","IngredientApiService","getIngredients","RatingApiService","getRatings","getUserRatedFoods","userid","postRating","foodId","userId","rating","foodid","RatingForm","checkRated","food","map","includes","thumb_rating","checked","ratings","disabled","renderRatingDisabled","renderRatingEnabled","FoodListItem","ingredients","_ratings$filter","foodRating","slicedToArray","brand","variety","kcal","grade","RatingForm_RatingForm_RatingForm","i1","i2","i3","i4","i5","FoodList","_this$context","_this$context$foodLis","_this$context$ingredi","_this$context$ratings","_this$context$userRat","_this$context$query","FoodListItem_FoodListItem_FoodListItem","renderFoods","SearchPage","placeholder","FoodList_FoodList_FoodList","SignInPage","src","alt","App","hasError","logoutFromIdle","forceUpdate","Header_Header_Header","exact","path","ReactDOM","FoodListContext_FoodListProvider","components_App_App","getElementById"],"mappings":"+PAGIA,ECEAA,6ECHEC,EAAkBC,IAAMC,cAAc,CAC3CC,SAAU,GACVC,gBAAiB,GACjBC,YAAa,GACbC,eAAgB,GAChBC,MAAO,KACPC,UAAU,EACVC,MAAO,KACPC,SAAU,aACVC,WAAY,aACZC,YAAa,aACbC,mBAAoB,aACpBC,eAAgB,aAChBC,kBAAmB,aACnBC,eAAgB,eAEFhB,IAEFiB,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAN,GAAA,QAAAO,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAAA,OAAAT,EAAAC,OAAAS,EAAA,EAAAT,CAAAE,MAAAJ,EAAAE,OAAAU,EAAA,EAAAV,CAAAJ,IAAAe,KAAAC,MAAAd,EAAA,CAAAI,MAAAW,OAAAP,MACCQ,MAAQ,CACPhC,SAAU,KACVC,gBAAiB,KACjBC,YAAa,KACbC,eAAgB,KAChBC,MAAO,KACPC,UAAU,EACVC,MAAO,MARTW,EAWCR,YAAc,SAAAT,GACbiB,EAAKgB,SAAS,CAAEjC,cAZlBiB,EAeCP,mBAAqB,SAAAT,GACpBgB,EAAKgB,SAAS,CAAEhC,qBAhBlBgB,EAmBCN,eAAiB,SAAAT,GAChBe,EAAKgB,SAAS,CAAE/B,iBApBlBe,EAuBCL,kBAAoB,SAAAT,GACnBc,EAAKgB,SAAS,CAAE9B,oBAxBlBc,EA2BCiB,SAAW,SAAA9B,GACVa,EAAKgB,SAAS,CAAE7B,WA5BlBa,EA+BCJ,eAAiB,WAChBI,EAAKgB,SAAS,CAAE5B,SAAoD,OAA1C8B,OAAOC,aAAaC,QAAQ,aAhCxDpB,EAmCCV,SAAW,SAAAD,GACVgC,QAAQhC,MAAMA,GACdW,EAAKgB,SAAS,CAAE3B,WArClBW,EAwCCT,WAAa,WACZS,EAAKgB,SAAS,CAAE3B,MAAO,QAzCzBW,EAAA,OAAAC,OAAAqB,EAAA,EAAArB,CAAAJ,EAAAC,GAAAG,OAAAsB,EAAA,EAAAtB,CAAAJ,EAAA,EAAA2B,IAAA,SAAAC,MAAA,WA6CE,IAAMA,EAAQ,CACb1C,SAAUoB,KAAKY,MAAMhC,SACrBC,gBAAiBmB,KAAKY,MAAM/B,gBAC5BC,YAAakB,KAAKY,MAAM9B,YACxBC,eAAgBiB,KAAKY,MAAM7B,eAC3BC,MAAOgB,KAAKY,MAAM5B,MAClBC,SAAUe,KAAKY,MAAM3B,SACrBC,MAAOc,KAAKY,MAAM1B,MAClBC,SAAUa,KAAKb,SACfC,WAAYY,KAAKZ,WACjBC,YAAaW,KAAKX,YAClBC,mBAAoBU,KAAKV,mBACzBC,eAAgBS,KAAKT,eACrBC,kBAAmBQ,KAAKR,kBACxBsB,SAAUd,KAAKc,SACfrB,eAAgBO,KAAKP,gBAEtB,OACC8B,EAAAC,EAAAC,cAAChD,EAAgBiD,SAAjB,CAA0BJ,MAAOA,GAC/BtB,KAAK2B,MAAMC,cAhEhBlC,EAAA,CAAsCmC,sCCpBvBC,EACA,gDADAA,EAGH,6BHGNC,EAAe,CACpBC,cADoB,SACNC,GACblB,OAAOC,aAAakB,QAAQJ,EAAkBG,IAG/CE,iBALoB,SAKHC,EAAIC,GACpBtB,OAAOC,aAAakB,QAAQ,SAAUE,GACtCrB,OAAOC,aAAakB,QAAQ,WAAYG,IAGzCC,aAVoB,WAWnB,OAAOvB,OAAOC,aAAaC,QAAQa,IAEpCS,eAboB,WAenBxB,OAAOC,aAAawB,WAAWV,IAEhCW,kBAjBoB,WAkBnB1B,OAAOC,aAAawB,WAAW,UAC/BzB,OAAOC,aAAawB,WAAW,aAEhCE,aArBoB,WAsBnB,QAASX,EAAaO,gBAEvBK,mBAxBoB,SAwBDC,EAAUC,GAC5B,OAAO9B,OAAO+B,KAAP,GAAAnC,OAAeiC,EAAf,KAAAjC,OAA2BkC,KAEnCE,SA3BoB,SA2BXC,GACR,OAAOC,IAAUD,IAElBE,aA9BoB,WA+BnB,OAAOnB,EAAagB,SAAShB,EAAaO,iBAE3Ca,kBAjCoB,SAiCFC,GACjB,OAAqB,IAAdA,EAAQC,IAAaC,KAAKC,OAElCC,0BApCoB,SAoCMC,GACzB,IAAMC,EAAgB3B,EAAaoB,kBAClCpB,EAAamB,gBAEd1E,EAAamF,WAAWF,EAAUC,EA1CT,MA4C1BE,0BA1CoB,WA2CnBC,aAAarF,KAIAuD,IC/CX+B,EAAgB,KAChBC,EAAiB,CACpB,YACA,YACA,WACA,SACA,cAIKC,EAAc,CACnBC,gBADmB,SACHC,GAEfJ,EAAgBI,GAGjBC,eANmB,SAMJC,GAGdP,aAAarF,GAEbA,EAAamF,WAAWG,EAbA,MAezBO,wBAbmB,WAelBN,EAAeO,QAAQ,SAAAC,GAAK,OAC3BC,SAASC,iBAAiBF,EAAOP,EAAYG,gBAAgB,MAG/DO,qBAnBmB,WAqBlBb,aAAarF,GACbuF,EAAeO,QAAQ,SAAAC,GAAK,OAC3BC,SAASG,oBAAoBJ,EAAOP,EAAYG,gBAAgB,OAKpDH,IGpCMY,oNAGpBC,kBAAoB,WACnB9C,EAAaQ,iBACbR,EAAaU,oBACb5C,EAAKiF,QAAQrF,iBACbsC,EAAa6B,4BACbI,EAAYU,0BAGbK,eAAiB,SAAA1C,GAChB,OAAOA,EAAS2C,OAAO,GAAGC,cAAgB5C,EAAS6C,MAAM,sFAIzD,IAAM7C,EAAWrC,KAAK+E,eACrBhE,OAAOC,aAAaC,QAAQ,aAE7B,OACCM,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,qBACd5D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,kBAAhB,UAAAxE,OAA4C0B,IAC5Cd,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAMC,QAASrF,KAAK6E,kBAAmBS,GAAG,KAA1C,qDAQF,OACC/D,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,yBACd5D,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAME,GAAG,UAAT,UACA/D,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAME,GAAG,aAAT,8CAMF,OACC/D,EAAAC,EAAAC,cAAAF,EAAAC,EAAA+D,SAAA,KACChE,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,UACd5D,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAME,GAAG,KAAT,qBAKD/D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,yBAAhB,6BAGCpD,EAAaW,eACX1C,KAAKwF,mBACLxF,KAAKyF,mBAGTlE,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,2BAAhB,qCAxDgCtD,cAAf+C,EACbc,YAAcjH,cCLP,SAASkH,EAATC,GAA+C,IAAvBC,EAAuBD,EAAvBC,UAAclE,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAA8F,EAAA,eACtD/D,EAAYgE,EAClB,OACEtE,EAAAC,EAAAC,cAACsE,EAAA,EAADjG,OAAAkG,OAAA,GACMrE,EADN,CAEEsE,OAAQ,SAAAC,GAAc,OACpBnE,EAAaW,eACTnB,EAAAC,EAAAC,cAACI,EAAcqE,GACf3E,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CACET,GAAI,CACFa,SAAU,SACVvF,MAAO,CAAEwF,KAAMF,EAAeG,iBCX/B,SAASC,EAATV,GAAkD,IAAvBC,EAAuBD,EAAvBC,UAAclE,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAA8F,EAAA,eACzD/D,EAAYgE,EAClB,OACEtE,EAAAC,EAAAC,cAACsE,EAAA,EAADjG,OAAAkG,OAAA,GACMrE,EADN,CAEEsE,OAAQ,SAAAC,GAAc,OACpBnE,EAAaW,eACTnB,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAUT,GAAI,MACd/D,EAAAC,EAAAC,cAACI,EAAcqE,oBCApB,SAASK,EAATC,GAAyC,IAAvBrB,EAAuBqB,EAAvBrB,UAAcxD,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAA0G,EAAA,eAC/C,OAAOjF,EAAAC,EAAAC,cAAA,SAAA3B,OAAAkG,OAAA,CAAQb,UAAW,CAAC,SAAUA,GAAWsB,KAAK,MAAU9E,IAOzD,SAAS+E,EAATC,GAAwC,IAAvBxB,EAAuBwB,EAAvBxB,UAAcxD,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAA6G,EAAA,eAC9C,OAAOpF,EAAAC,EAAAC,cAAA,QAAA3B,OAAAkG,OAAA,CAAOb,UAAW,CAAC,QAASA,GAAWsB,KAAK,MAAU9E,IAGvD,SAASiF,EAATC,GAA2C,IAAvB1B,EAAuB0B,EAAvB1B,UAAcxD,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAA+G,EAAA,eACjD,OACCtF,EAAAC,EAAAC,cAAA,OAAA3B,OAAAkG,OAAA,CAAMb,UAAW,CAAC,WAAYA,GAAWsB,KAAK,MAAU9E,GAAxD,KAMK,SAASmF,EAATC,GAAgD,IAA7B5B,EAA6B4B,EAA7B5B,UAAW6B,EAAkBD,EAAlBC,KAASrF,EAAS7B,OAAAgG,EAAA,EAAAhG,CAAAiH,EAAA,sBAChDE,EAAU,CAAC,UAAWD,GAAQ,gBAAiB7B,GACnD+B,OAAOC,SACPV,KAAK,KACP,OAAOlF,EAAAC,EAAAC,cAAA,UAAA3B,OAAAkG,OAAA,CAASb,UAAW8B,GAAatF,IChCzC,IAAMyF,EAAiB,CACtBC,SADsB,SACbC,GACR,OAAOC,MAAK,GAAA5G,OAAImB,EAAJ,UAAiC,CAC5C0F,OAAQ,OACRC,QAAS,CACRC,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAUP,KACnBQ,KAAK,SAAAC,GAAG,OACTA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,QAGhDG,UAZsB,SAAAzC,GAYa,IAAvB0C,EAAuB1C,EAAvB0C,UAAWzF,EAAY+C,EAAZ/C,SACtB,OAAO0E,MAAK,GAAA5G,OAAImB,EAAJ,eAAsC,CACjD0F,OAAQ,OACRC,QAAS,CACRC,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAU,CAAES,YAAWzF,eAEjCiF,KAAK,SAAAC,GAAG,OACPA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,OAE9CJ,KAAK,SAAAC,GAaL,OANAhG,EAAaC,cAAc+F,EAAIQ,WAC/BxG,EAAaI,iBAAiB4F,EAAIS,QAAST,EAAI1F,UAC/C2B,EAAYK,0BACZtC,EAAayB,0BAA0B,WACtC4D,EAAeqB,qBAETV,KAGVU,iBAvCsB,WAwCrB,OAAOlB,MAAK,GAAA5G,OAAImB,EAAJ,iBAAwC,CACnD0F,OAAQ,OACRC,QAAS,CACRiB,cAAa,UAAA/H,OAAYoB,EAAaO,mBAGtCwF,KAAK,SAAAC,GAAG,OACPA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,OAE9CJ,KAAK,SAAAC,GAUL,OAJAhG,EAAaC,cAAc+F,EAAIQ,WAC/BxG,EAAayB,0BAA0B,WACtC4D,EAAeqB,qBAETV,IAEPY,MAAM,SAAAC,GACN1H,QAAQ2H,IAAI,+BACZ3H,QAAQhC,MAAM0J,OAKHxB,ICpEM0B,6MAKpBlI,MAAQ,CAAE1B,MAAO,QAEjB6J,oBAAsB,SAAAb,GACrBA,EAAEc,iBACFnJ,EAAKgB,SAAS,CAAE3B,MAAO,OAFG,IAAA+J,EAGMf,EAAEgB,OAA1BZ,EAHkBW,EAGlBX,UAAWzF,EAHOoG,EAGPpG,SAEnBuE,EAAeiB,UAAU,CACxBC,UAAWA,EAAUhH,MACrBuB,SAAUA,EAASvB,QAElBwG,KAAK,SAAAC,GACLO,EAAUhH,MAAQ,GAClBuB,EAASvB,MAAQ,GACjBzB,EAAK8B,MAAMwH,mBAEXR,MAAM,SAAAZ,GACNlI,EAAKgB,SAAS,CACb3B,MAAO6I,EAAI7I,mFAKN,IACAA,EAAUc,KAAKY,MAAf1B,MACR,OACCqC,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,YAAYiE,SAAUpJ,KAAK+I,qBAC1CxH,EAAAC,EAAAC,cAAA,OAAK4H,KAAK,SAASnK,GAASqC,EAAAC,EAAAC,cAAA,KAAG0D,UAAU,OAAOjG,IAChDqC,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,aACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,wBAAf,aACA/H,EAAAC,EAAAC,cAACiF,EAAD,CAAO6C,UAAQ,EAACC,KAAK,YAAYpH,GAAG,0BAErCb,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,YACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,uBAAf,YACA/H,EAAAC,EAAAC,cAACiF,EAAD,CACC6C,UAAQ,EACRC,KAAK,WACLC,KAAK,WACLrH,GAAG,yBAGLb,EAAAC,EAAAC,cAAC8E,EAAD,CAAQkD,KAAK,UAAb,iBA9CmC5H,aAAlBiH,EACbY,aAAe,CACrBP,eAAgB,kBCDGQ,6MASpBC,mBAAqB,WACpB/J,EAAKiF,QAAQrF,iBADa,IAAAoK,EAEIhK,EAAK8B,MAA3B0E,EAFkBwD,EAElBxD,SAAUyD,EAFQD,EAERC,QACZC,GAAe1D,EAASzF,OAAS,IAAIwF,MAAQ,IACnD0D,EAAQE,KAAKD,4EAIb,OACCxI,EAAAC,EAAAC,cAACqF,EAAD,CAAS3B,UAAU,aAClB5D,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAACwI,EAAD,CAAWd,eAAgBnJ,KAAK4J,6BApBG/H,aAAlB8H,EACbjE,YAAcjH,EADDkL,EAEbD,aAAe,CACrBrD,SAAU,GACVyD,QAAS,CACRE,KAAM,mBCNYE,6MAKpBtJ,MAAQ,CAAE1B,MAAO,QAEjBiL,aAAe,SAAA/F,GACdA,EAAG4E,iBADiB,IAAAoB,EAEkChG,EAAG8E,OAAjDmB,EAFYD,EAEZC,UAAWC,EAFCF,EAEDE,UAAWhC,EAFV8B,EAEU9B,UAAWzF,EAFrBuH,EAEqBvH,SACzChD,EAAKgB,SAAS,CAAE3B,MAAO,OACvBkI,EAAeC,SAAS,CACvBiB,UAAWA,EAAUhH,MACrBuB,SAAUA,EAASvB,MACnB+I,UAAWA,EAAU/I,MACrBe,SAAUiI,EAAUhJ,QAEnBwG,KAAK,SAAAR,GACL+C,EAAU/I,MAAQ,GAClBgJ,EAAUhJ,MAAQ,GAClBgH,EAAUhH,MAAQ,GAClBuB,EAASvB,MAAQ,GACjBzB,EAAK8B,MAAM4I,0BAEX5B,MAAM,SAAAZ,GACNlI,EAAKgB,SAAS,CAAE3B,MAAO6I,EAAI7I,mFAIrB,IACAA,EAAUc,KAAKY,MAAf1B,MACR,OACCqC,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,mBAAmBiE,SAAUpJ,KAAKmK,cACjD5I,EAAAC,EAAAC,cAAA,OAAK4H,KAAK,SAASnK,GAASqC,EAAAC,EAAAC,cAAA,KAAG0D,UAAU,OAAOjG,IAChDqC,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,aACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,+BAAf,aACW/H,EAAAC,EAAAC,cAACmF,EAAD,OAEXrF,EAAAC,EAAAC,cAACiF,EAAD,CACC8C,KAAK,YACLC,KAAK,OACLF,UAAQ,EACRnH,GAAG,iCAGLb,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,aACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,+BAAf,aACW/H,EAAAC,EAAAC,cAACmF,EAAD,OAEXrF,EAAAC,EAAAC,cAACiF,EAAD,CACC8C,KAAK,YACLC,KAAK,OACLF,UAAQ,EACRnH,GAAG,iCAGLb,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,YACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,8BAAf,YACU/H,EAAAC,EAAAC,cAACmF,EAAD,OAEVrF,EAAAC,EAAAC,cAACiF,EAAD,CACC8C,KAAK,WACLC,KAAK,WACLF,UAAQ,EACRnH,GAAG,gCAGLb,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,aACd5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,+BAAf,YACA/H,EAAAC,EAAAC,cAACiF,EAAD,CACC8C,KAAK,YACLC,KAAK,OACLF,UAAQ,EACRnH,GAAG,iCAGLb,EAAAC,EAAAC,cAAC8E,EAAD,CAAQkD,KAAK,UAAb,oBA5E0C5H,aAAzBqI,EACbR,aAAe,CACrBa,sBAAuB,kBCFJC,6MAOnBC,0BAA4B,SAAAnD,GACNzH,EAAK8B,MAAjBmI,QACAE,KAAK,mFAIb,OACEzI,EAAAC,EAAAC,cAACqF,EAAD,CAAS3B,UAAU,oBACjB5D,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAACiJ,EAAD,CACEH,sBAAuBvK,KAAKyK,oCAjBQ5I,aAAzB2I,EACZd,aAAe,CACpBI,QAAS,CACPE,KAAM,mBCJSW,mLAEjB,OACEpJ,EAAAC,EAAAC,cAACqF,EAAD,CAAS3B,UAAU,gBACjB5D,EAAAC,EAAAC,cAAA,kCACAF,EAAAC,EAAAC,cAAA,0DALkCI,aCgD3B+I,UAhDQ,CACtBC,SADsB,WAErB,OAAOtD,MAAK,GAAA5G,OAAImB,EAAJ,WAAiCgG,KAAK,SAAAC,GAAG,OACnDA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,UC6ClC4C,EAhDc,CAC5BC,eAD4B,WAE3B,OAAOxD,MAAK,GAAA5G,OAAImB,EAAJ,iBAAuCgG,KAAK,SAAAC,GAAG,OACzDA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,SCsDlC8C,EAzDU,CACxBC,WADwB,WAEvB,OAAO1D,MAAK,GAAA5G,OAAImB,EAAJ,aAAmCgG,KAAK,SAAAC,GAAG,OACrDA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,QAGhDgD,kBANwB,SAMNC,GACjB,OAAO5D,MAAK,GAAA5G,OAAImB,EAAJ,0BAAAnB,OAAgDwK,GAAU,CACrE3D,OAAQ,MACRC,QAAS,CACRiB,cAAa,UAAA/H,OAAYoB,EAAaO,gBACtCoF,eAAgB,sBAEfI,KAAK,SAAAC,GAAG,OACTA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,QAyBhDkD,WAvCwB,SAuCbC,EAAQC,EAAQC,GAC1B,OAAOhE,MAAK,GAAA5G,OAAImB,EAAJ,mBAAAnB,OAAyC0K,GAAU,CAC9D7D,OAAQ,OACRC,QAAS,CACRiB,cAAa,UAAA/H,OAAYoB,EAAaO,gBACtCoF,eAAgB,oBAEjBC,KAAMC,KAAKC,UAAU,CACpB2D,OAAQH,EACRE,OAAQA,EACRJ,OAAQG,MAEPxD,KAAK,SAAAC,GAAG,OACTA,EAAIC,GAA+CD,EAAIE,OAA9CF,EAAIE,OAAOH,KAAK,SAAAI,GAAC,OAAIC,QAAQC,OAAOF,iBChD5BuD,qNAGpBC,WAAa,WAAM,IACVC,EAAS9L,EAAK8B,MAAdgK,KAGR,OAF2B9L,EAAKiF,QAAxB/F,eACuB6M,IAAI,SAAAD,GAAI,OAAIA,EAAKH,SACjCK,SAASF,EAAKvJ,OAwD9B+H,aAAe,SAAAjC,GACdA,EAAEc,iBAEF,IAAM8C,EAAe5D,EAAEgB,OAAO,GAAG6C,QAAU,GAAK,EACxCJ,EAAS9L,EAAK8B,MAAdgK,KACFL,EAAStK,aAAaC,QAAQ,UAYpC+J,EAAiBI,WAAWO,EAAKvJ,GAAIkJ,EAAQQ,GAC3ChE,KAAK,kBAAMkD,EAAiBC,eAC5BnD,KAAK,SAAAkE,GACLnM,EAAKiF,QAAQvF,eAAeyM,KAE5BlE,KAAK,kBACLkD,EAAiBE,kBAChBnK,OAAOC,aAAaC,QAAQ,aAG7B6G,KAAKjI,EAAKiF,QAAQtF,mBAClBmJ,MAAM9I,EAAKiF,QAAQ3F,iGA7ErB,OACCoC,EAAAC,EAAAC,cAAA,QACC0D,UAAU,mCACViE,SAAUpJ,KAAKmK,cACf5I,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,mBAAf,aACA/H,EAAAC,EAAAC,cAAC8E,EAAD,CACCkD,KAAK,SACLD,KAAK,kBACLlI,MAAM,IACN6D,UAAU,oBACV8G,UAAQ,GALT,aAQA1K,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,qBAAf,eACA/H,EAAAC,EAAAC,cAAC8E,EAAD,CACCkD,KAAK,SACLD,KAAK,oBACLlI,MAAM,KACN6D,UAAU,oBACV8G,UAAQ,GALT,8DAaF,OACC1K,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,uBAAuBiE,SAAUpJ,KAAKmK,cACrD5I,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,mBAAf,aACA/H,EAAAC,EAAAC,cAAC8E,EAAD,CACCkD,KAAK,SACLD,KAAK,kBACLlI,MAAM,IACN6D,UAAU,qBAJX,aAOA5D,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,qBAAf,eACA/H,EAAAC,EAAAC,cAAC8E,EAAD,CACCkD,KAAK,SACLD,KAAK,oBACLlI,MAAM,KACN6D,UAAU,qBAJX,iDA2CF,OAAOnF,KAAK0L,aACT1L,KAAKkM,uBACLlM,KAAKmM,6BAjG8BtK,cAAnB4J,EACb/F,YAAcjH,aCFD2N,mLACX,IAAAvC,EAC+B7J,KAAK2B,MAApCgK,EADA9B,EACA8B,KAAMU,EADNxC,EACMwC,YADNC,EAAAzC,EACmBmC,QAIE9E,OAAO,SAAAqE,GAAM,OAAIA,EAAOC,SAAWG,EAAKvJ,KAA9DmK,EALCzM,OAAA0M,EAAA,EAAA1M,CAAAwM,EAAA,MAMR,OACC/K,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,gBAClB5D,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,yBACd5D,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,sBACd5D,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,yBACZwG,EAAKc,MADP,IACed,EAAKe,QADpB,WAGAnL,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACb5D,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,sBAAsBwG,EAAKgB,KAAzC,aACApL,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,uBAAd,2BAC0BwG,EAAKiB,OAE/BrL,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,wBAAd,UACSoH,EAAWhB,QAGpBhK,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,gBAClB5D,EAAAC,EAAAC,cAACoL,EAAD,CAAYlB,KAAMA,MAGpBpK,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,6BACb5D,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACZkH,EAAYV,EAAKmB,GAAK,GAAGtD,MAE3BjI,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACZkH,EAAYV,EAAKoB,GAAK,GAAGvD,MAE3BjI,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACZkH,EAAYV,EAAKqB,GAAK,GAAGxD,MAE3BjI,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACZkH,EAAYV,EAAKsB,GAAK,GAAGzD,MAE3BjI,EAAAC,EAAAC,cAAA,MAAI0D,UAAU,4BACZkH,EAAYV,EAAKuB,GAAK,GAAG1D,iBA1CQ3H,aCGrBsL,sMAInBnN,KAAK8E,QAAQ1F,aACbwL,EAAeC,WACb/C,KAAK9H,KAAK8E,QAAQzF,aAClBsJ,MAAM3I,KAAK8E,QAAQ3F,UACrB2L,EAAqBC,iBACnBjD,KAAK9H,KAAK8E,QAAQxF,oBAClBqJ,MAAM3I,KAAK8E,QAAQ3F,UACrB6L,EAAiBC,aACfnD,KAAK9H,KAAK8E,QAAQvF,gBAClBoJ,MAAM3I,KAAK8E,QAAQ3F,UACrB6L,EAAiBE,kBAAkBnK,OAAOC,aAAaC,QAAQ,WAC7D6G,KAAK9H,KAAK8E,QAAQtF,mBAClBmJ,MAAM3I,KAAK8E,QAAQ3F,gDAGR,IAAAiO,EAOTpN,KAAK8E,QAPIuI,EAAAD,EAEZxO,gBAFY,IAAAyO,EAED,KAFCA,EAAAC,EAAAF,EAGZvO,uBAHY,IAAAyO,EAGM,KAHNA,EAAAC,EAAAH,EAIZtO,mBAJY,IAAAyO,EAIE,KAJFA,EAAAC,EAAAJ,EAKZrO,sBALY,IAAAyO,EAKK,KALLA,EAAAC,EAAAL,EAMZpO,aANY,IAAAyO,EAMJ,KANIA,EASb,OAAQ7O,GAAaC,GAAoBC,GAAgBC,EAIpDC,EAUJJ,EACEsI,OAAO,SAAAyE,GAAI,OAAIA,EAAKe,QAAQb,SAAS7M,KACrC4M,IAAI,SAAAD,GAAI,OACRpK,EAAAC,EAAAC,cAACiM,EAAD,CACCrM,IAAKsK,EAAKvJ,GACVuJ,KAAMA,EACNU,YAAaxN,EACbmN,QAASlN,MAhBZF,EAASgN,IAAI,SAAAD,GAAI,OAChBpK,EAAAC,EAAAC,cAACiM,EAAD,CACCrM,IAAKsK,EAAKvJ,GACVuJ,KAAMA,EACNU,YAAaxN,EACbmN,QAASlN,MATXyC,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,YAClB5D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,eAAe,4DAyBzB,IACAjG,EAAUc,KAAK8E,QAAf5F,MACR,OACCqC,EAAAC,EAAAC,cAACqF,EAAD,CAASE,MAAI,EAAC7B,UAAU,YACtBjG,EACAqC,EAAAC,EAAAC,cAAA,KAAG0D,UAAU,OAAb,iCAEAnF,KAAK2N,sBA9D4B9L,cAAjBsL,EACbzH,YAAcjH,aCLDmP,6MAGpBzD,aAAe,SAAAjC,GACdA,EAAEc,iBACF,IAAMhK,EAAQkJ,EAAEgB,OAAO,GAAG5H,MAC1BzB,EAAKiF,QAAQhE,SAAS9B,4EAItB,OACCuC,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,cAClB5D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,aAAaiE,SAAUpJ,KAAKmK,cAC3C5I,EAAAC,EAAAC,cAAA,SAAO6H,QAAQ,UAAf,UACA/H,EAAAC,EAAAC,cAAA,SACCgI,KAAK,OACLtE,UAAU,SACV0I,YAAY,wBAGdtM,EAAAC,EAAAC,cAACqM,EAAD,cApBoCjM,aAAnB+L,EACblI,YAAcjH,MCHDsP,mLAEnB,OACCxM,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,gBAClB5D,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAME,GAAG,WAAT,gBACA/D,EAAAC,EAAAC,cAAA,WAAS0D,UAAU,qBAClB5D,EAAAC,EAAAC,cAAA,KAAG0D,UAAU,WAAb,sUAOC,MACD5D,EAAAC,EAAAC,cAAA,KAAG0D,UAAU,YAAb,uOAOD5D,EAAAC,EAAAC,cAAA,OACCuM,IAAI,iGACJC,IAAI,4BAvB+BpM,aCgBlCqM,6MACLtN,MAAQ,CAAEuN,UAAU,KAwBpBC,eAAiB,WAChBrM,EAAaQ,iBACbR,EAAaU,oBACbV,EAAa6B,4BACbI,EAAYU,uBACZ7E,EAAKwO,kGArBLrK,EAAYC,gBAAgBjE,KAAKoO,gBAE7BrM,EAAaW,iBAChB1C,KAAK8E,QAAQrF,iBACbuE,EAAYK,0BACZtC,EAAayB,0BAA0B,WACtC4D,EAAeqB,qEAMjBzE,EAAYU,uBACZ3C,EAAa6B,6DAYb,OACCrC,EAAAC,EAAAC,cAAA,OAAK0D,UAAU,OACd5D,EAAAC,EAAAC,cAAC6M,EAAD,CAAQnJ,UAAU,gBAClB5D,EAAAC,EAAAC,cAAA,QAAM0D,UAAU,aACf5D,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAQZ,UAAU,cACjB5D,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOwI,OAAK,EAACC,KAAK,IAAI3I,UAAWkI,IACjCxM,EAAAC,EAAAC,cAAC6E,EAAD,CAAiBkI,KAAK,SAAS3I,UAAW8D,IAC1CpI,EAAAC,EAAAC,cAAC6E,EAAD,CAAiBkI,KAAK,YAAY3I,UAAW2E,IAC7CjJ,EAAAC,EAAAC,cAACkE,EAAD,CAAc6I,KAAK,UAAU3I,UAAW+H,IACxCrM,EAAAC,EAAAC,cAACsE,EAAA,EAAD,CAAOF,UAAW8E,0DAxCSzL,GAE/B,OADAgC,QAAQhC,MAAMA,GACP,CAAEiP,UAAU,UALHtM,aAAZqM,EAEExI,YAAcjH,EAqDPyP,gBCnEfO,IAASxI,OACR1E,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,KACC7D,EAAAC,EAAAC,cAACiN,EAAD,KACCnN,EAAAC,EAAAC,cAACkN,GAAD,QAGFnK,SAASoK,eAAe","file":"static/js/main.38569ae5.chunk.js","sourcesContent":["import jwtDecode from \"jwt-decode\";\r\nimport config from \"../config\";\r\n\r\nlet _timeoutId;\r\nconst _TEN_SECONDS_IN_MS = 10000;\r\n\r\nconst TokenService = {\r\n\tsaveAuthToken(token) {\r\n\t\twindow.localStorage.setItem(config.TOKEN_KEY, token);\r\n\t\t// localStorage.get() and set()\r\n\t},\r\n\tsaveUserMetadata(id, nickname) {\r\n\t\twindow.localStorage.setItem(\"userid\", id);\r\n\t\twindow.localStorage.setItem(\"nickname\", nickname);\r\n\t},\r\n\r\n\tgetAuthToken() {\r\n\t\treturn window.localStorage.getItem(config.TOKEN_KEY);\r\n\t},\r\n\tclearAuthToken() {\r\n\t\t// console.info(\"clearing the auth token\");\r\n\t\twindow.localStorage.removeItem(config.TOKEN_KEY);\r\n\t},\r\n\tclearUserMetadata() {\r\n\t\twindow.localStorage.removeItem(\"userid\");\r\n\t\twindow.localStorage.removeItem(\"nickname\");\r\n\t},\r\n\thasAuthToken() {\r\n\t\treturn !!TokenService.getAuthToken();\r\n\t},\r\n\tmakeBasicAuthToken(userName, password) {\r\n\t\treturn window.btoa(`${userName}:${password}`);\r\n\t},\r\n\tparseJwt(jwt) {\r\n\t\treturn jwtDecode(jwt);\r\n\t},\r\n\treadJwtToken() {\r\n\t\treturn TokenService.parseJwt(TokenService.getAuthToken());\r\n\t},\r\n\t_getMsUntilExpiry(payload) {\r\n\t\treturn payload.exp * 1000 - Date.now();\r\n\t},\r\n\tqueueCallbackBeforeExpiry(callback) {\r\n\t\tconst msUntilExpiry = TokenService._getMsUntilExpiry(\r\n\t\t\tTokenService.readJwtToken()\r\n\t\t);\r\n\t\t_timeoutId = setTimeout(callback, msUntilExpiry - _TEN_SECONDS_IN_MS);\r\n\t},\r\n\tclearCallbackBeforeExpiry() {\r\n\t\tclearTimeout(_timeoutId);\r\n\t}\r\n};\r\n\r\nexport default TokenService;\r\n","/*\r\n  Idle Service\r\n  this service manages when a user has gone idle (not interacting with the page).\r\n*/\r\n\r\nlet _timeoutId;\r\nlet _idleCallback = null;\r\nlet _notIdleEvents = [\r\n\t\"mousedown\",\r\n\t\"mousemove\",\r\n\t\"keypress\",\r\n\t\"scroll\",\r\n\t\"touchstart\"\r\n];\r\nlet _FIVE_MINUTES_IN_MS = 5 * 60 * 1000;\r\n\r\nconst IdleService = {\r\n\tsetIdleCallback(idleCallback) {\r\n\t\t/* store a callback to call when the user goes idle */\r\n\t\t_idleCallback = idleCallback;\r\n\t},\r\n\t/* called when a user interacts with the page */\r\n\tresetIdleTimer(ev) {\r\n\t\t// console.info(\"event:\", ev.type);\r\n\t\t/* remove any timeouts as the user just interacted */\r\n\t\tclearTimeout(_timeoutId);\r\n\t\t/* queue the callback to happen 5 minutes from now */\r\n\t\t_timeoutId = setTimeout(_idleCallback, _FIVE_MINUTES_IN_MS);\r\n\t},\r\n\tregisterIdleTimerResets() {\r\n\t\t/* register the resetIdleTimer for events when a user interacts with page */\r\n\t\t_notIdleEvents.forEach(event =>\r\n\t\t\tdocument.addEventListener(event, IdleService.resetIdleTimer, true)\r\n\t\t);\r\n\t},\r\n\tunRegisterIdleResets() {\r\n\t\t/* remove any queued callbacks and events that will queue callbacks */\r\n\t\tclearTimeout(_timeoutId);\r\n\t\t_notIdleEvents.forEach(event =>\r\n\t\t\tdocument.removeEventListener(event, IdleService.resetIdleTimer, true)\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default IdleService;\r\n","import React, { Component } from \"react\";\r\n\r\nconst FoodListContext = React.createContext({\r\n\tfoodList: [],\r\n\tingredientsList: [],\r\n\tratingsList: [],\r\n\tuserRatedFoods: [],\r\n\tquery: null,\r\n\tloggedIn: false,\r\n\terror: null,\r\n\tsetError: () => {},\r\n\tclearError: () => {},\r\n\tsetFoodList: () => {},\r\n\tsetIngredientsList: () => {},\r\n\tsetRatingsList: () => {},\r\n\tsetUserRatedFoods: () => {},\r\n\tupdateLoggedIn: () => {}\r\n});\r\nexport default FoodListContext;\r\n\r\nexport class FoodListProvider extends Component {\r\n\tstate = {\r\n\t\tfoodList: null,\r\n\t\tingredientsList: null,\r\n\t\tratingsList: null,\r\n\t\tuserRatedFoods: null,\r\n\t\tquery: null,\r\n\t\tloggedIn: false,\r\n\t\terror: null\r\n\t};\r\n\r\n\tsetFoodList = foodList => {\r\n\t\tthis.setState({ foodList });\r\n\t};\r\n\r\n\tsetIngredientsList = ingredientsList => {\r\n\t\tthis.setState({ ingredientsList });\r\n\t};\r\n\r\n\tsetRatingsList = ratingsList => {\r\n\t\tthis.setState({ ratingsList });\r\n\t};\r\n\r\n\tsetUserRatedFoods = userRatedFoods => {\r\n\t\tthis.setState({ userRatedFoods });\r\n\t};\r\n\r\n\tsetQuery = query => {\r\n\t\tthis.setState({ query });\r\n\t};\r\n\r\n\tupdateLoggedIn = () => {\r\n\t\tthis.setState({ loggedIn: window.localStorage.getItem(\"userid\") !== null });\r\n\t};\r\n\r\n\tsetError = error => {\r\n\t\tconsole.error(error);\r\n\t\tthis.setState({ error });\r\n\t};\r\n\r\n\tclearError = () => {\r\n\t\tthis.setState({ error: null });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst value = {\r\n\t\t\tfoodList: this.state.foodList,\r\n\t\t\tingredientsList: this.state.ingredientsList,\r\n\t\t\tratingsList: this.state.ratingsList,\r\n\t\t\tuserRatedFoods: this.state.userRatedFoods,\r\n\t\t\tquery: this.state.query,\r\n\t\t\tloggedIn: this.state.loggedIn,\r\n\t\t\terror: this.state.error,\r\n\t\t\tsetError: this.setError,\r\n\t\t\tclearError: this.clearError,\r\n\t\t\tsetFoodList: this.setFoodList,\r\n\t\t\tsetIngredientsList: this.setIngredientsList,\r\n\t\t\tsetRatingsList: this.setRatingsList,\r\n\t\t\tsetUserRatedFoods: this.setUserRatedFoods,\r\n\t\t\tsetQuery: this.setQuery,\r\n\t\t\tupdateLoggedIn: this.updateLoggedIn\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<FoodListContext.Provider value={value}>\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</FoodListContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n","export default {\r\n\tAPI_ENDPOINT: \"https://ancient-taiga-68163.herokuapp.com/api\",\r\n\t// API_ENDPOINT: \"http://localhost:8000/api\",\r\n\tTOKEN_KEY: \"pet-food-client-auth-token\"\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport TokenService from \"../../services/token-service\";\r\nimport IdleService from \"../../services/idle-service\";\r\nimport \"./Header.css\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\n\r\nexport default class Header extends Component {\r\n\tstatic contextType = FoodListContext;\r\n\r\n\thandleLogoutClick = () => {\r\n\t\tTokenService.clearAuthToken();\r\n\t\tTokenService.clearUserMetadata();\r\n\t\tthis.context.updateLoggedIn();\r\n\t\tTokenService.clearCallbackBeforeExpiry();\r\n\t\tIdleService.unRegisterIdleResets();\r\n\t};\r\n\r\n\tformatNickName = nickname => {\r\n\t\treturn nickname.charAt(0).toUpperCase() + nickname.slice(1);\r\n\t};\r\n\r\n\trenderLogoutLink() {\r\n\t\tconst nickname = this.formatNickName(\r\n\t\t\twindow.localStorage.getItem(\"nickname\")\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<div className=\"Header__logged-in\">\r\n\t\t\t\t<span className=\"User__greeting\">{`Hello, ${nickname}`}</span>\r\n\t\t\t\t<Link onClick={this.handleLogoutClick} to=\"/\">\r\n\t\t\t\t\tLogout\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderLoginLink() {\r\n\t\treturn (\r\n\t\t\t<div className=\"Header__not-logged-in\">\r\n\t\t\t\t<Link to=\"/login\">Log in</Link>\r\n\t\t\t\t<Link to=\"/register\">Register</Link>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<nav className=\"Header\">\r\n\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t{/* <FontAwesomeIcon className=\"blue\" icon=\"gift\" /> */}\r\n\t\t\t\t\t\t\tPet Food Shopper\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<span className=\"Header__tagline--wide\">\r\n\t\t\t\t\t\tPet Nutrition, Simplified\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t{TokenService.hasAuthToken()\r\n\t\t\t\t\t\t? this.renderLogoutLink()\r\n\t\t\t\t\t\t: this.renderLoginLink()}\r\n\t\t\t\t</nav>\r\n\r\n\t\t\t\t<span className=\"Header__tagline--narrow\">\r\n\t\t\t\t\tPet Nutrition, Simplified\r\n\t\t\t\t</span>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport TokenService from '../../services/token-service'\r\n\r\nexport default function PrivateRoute({ component, ...props }) {\r\n  const Component = component\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={componentProps => (\r\n        TokenService.hasAuthToken()\r\n          ? <Component {...componentProps} />\r\n          : <Redirect\r\n              to={{\r\n                pathname: '/login',\r\n                state: { from: componentProps.location }\r\n              }}\r\n            />\r\n      )}\r\n    />\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport TokenService from '../../services/token-service'\r\n\r\nexport default function PublicOnlyRoute({ component, ...props }) {\r\n  const Component = component\r\n  return (\r\n    <Route\r\n      {...props}\r\n      render={componentProps => (\r\n        TokenService.hasAuthToken()\r\n          ? <Redirect to={'/'} />\r\n          : <Component {...componentProps} />\r\n      )}\r\n    />\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { format as formatDate } from \"date-fns\";\r\nimport \"./Utils.css\";\r\n\r\nexport function NiceDate({ date, format = \"Do MMMM YYYY\" }) {\r\n\treturn formatDate(date, format);\r\n}\r\n\r\nexport function Hyph() {\r\n\treturn <span className=\"Hyph\">{\" - \"}</span>;\r\n}\r\n\r\nexport function Button({ className, ...props }) {\r\n\treturn <button className={[\"Button\", className].join(\" \")} {...props} />;\r\n}\r\n\r\nexport function Textarea({ className, ...props }) {\r\n\treturn <textarea className={[\"Textarea\", className].join(\" \")} {...props} />;\r\n}\r\n\r\nexport function Input({ className, ...props }) {\r\n\treturn <input className={[\"Input\", className].join(\" \")} {...props} />;\r\n}\r\n\r\nexport function Required({ className, ...props }) {\r\n\treturn (\r\n\t\t<span className={[\"Required\", className].join(\" \")} {...props}>\r\n\t\t\t&#42;\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\nexport function Section({ className, list, ...props }) {\r\n\tconst classes = [\"Section\", list && \"Section--list\", className]\r\n\t\t.filter(Boolean)\r\n\t\t.join(\" \");\r\n\treturn <section className={classes} {...props} />;\r\n}\r\n","import config from \"../config\";\r\nimport TokenService from \"./token-service\";\r\nimport IdleService from \"./idle-service\";\r\n\r\nconst AuthApiService = {\r\n\tpostUser(user) {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/users`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"content-type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(user)\r\n\t\t}).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t},\r\n\tpostLogin({ user_name, password }) {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/auth/login`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"content-type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({ user_name, password })\r\n\t\t})\r\n\t\t\t.then(res =>\r\n\t\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t\t)\r\n\t\t\t.then(res => {\r\n\t\t\t\t/*\r\n          whenever a login is performed:\r\n          1. save the token in local storage\r\n          2. queue auto logout when the user goes idle\r\n          3. queue a call to the refresh endpoint based on the JWT's exp value\r\n        */\r\n\t\t\t\tTokenService.saveAuthToken(res.authToken);\r\n\t\t\t\tTokenService.saveUserMetadata(res.user_id, res.nickname);\r\n\t\t\t\tIdleService.registerIdleTimerResets();\r\n\t\t\t\tTokenService.queueCallbackBeforeExpiry(() => {\r\n\t\t\t\t\tAuthApiService.postRefreshToken();\r\n\t\t\t\t});\r\n\t\t\t\treturn res;\r\n\t\t\t});\r\n\t},\r\n\tpostRefreshToken() {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/auth/refresh`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: `Bearer ${TokenService.getAuthToken()}`\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res =>\r\n\t\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t\t)\r\n\t\t\t.then(res => {\r\n\t\t\t\t/*\r\n          similar logic to whenever a user logs in, the only differences are:\r\n          - we don't need to queue the idle timers again as the user is already logged in.\r\n          - we'll catch the error here as this refresh is happening behind the scenes\r\n        */\r\n\t\t\t\tTokenService.saveAuthToken(res.authToken);\r\n\t\t\t\tTokenService.queueCallbackBeforeExpiry(() => {\r\n\t\t\t\t\tAuthApiService.postRefreshToken();\r\n\t\t\t\t});\r\n\t\t\t\treturn res;\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.log(\"refresh token request error\");\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t}\r\n};\r\n\r\nexport default AuthApiService;\r\n","import React, { Component } from \"react\";\r\nimport { Button, Input } from \"../Utils/Utils\";\r\nimport AuthApiService from \"../../services/auth-api-service\";\r\n\r\nexport default class LoginForm extends Component {\r\n\tstatic defaultProps = {\r\n\t\tonLoginSuccess: () => {}\r\n\t};\r\n\r\n\tstate = { error: null };\r\n\r\n\thandleSubmitJwtAuth = e => {\r\n\t\te.preventDefault();\r\n\t\tthis.setState({ error: null });\r\n\t\tconst { user_name, password } = e.target;\r\n\r\n\t\tAuthApiService.postLogin({\r\n\t\t\tuser_name: user_name.value,\r\n\t\t\tpassword: password.value\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tuser_name.value = \"\";\r\n\t\t\t\tpassword.value = \"\";\r\n\t\t\t\tthis.props.onLoginSuccess();\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: res.error\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { error } = this.state;\r\n\t\treturn (\r\n\t\t\t<form className=\"LoginForm\" onSubmit={this.handleSubmitJwtAuth}>\r\n\t\t\t\t<div role=\"alert\">{error && <p className=\"red\">{error}</p>}</div>\r\n\t\t\t\t<div className=\"user_name\">\r\n\t\t\t\t\t<label htmlFor=\"LoginForm__user_name\">User name</label>\r\n\t\t\t\t\t<Input required name=\"user_name\" id=\"LoginForm__user_name\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"password\">\r\n\t\t\t\t\t<label htmlFor=\"LoginForm__password\">Password</label>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tid=\"LoginForm__password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button type=\"submit\">Login</Button>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport LoginForm from \"../../components/LoginForm/LoginForm\";\r\nimport { Section } from \"../../components/Utils/Utils\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\n\r\nexport default class LoginPage extends Component {\r\n\tstatic contextType = FoodListContext;\r\n\tstatic defaultProps = {\r\n\t\tlocation: {},\r\n\t\thistory: {\r\n\t\t\tpush: () => {}\r\n\t\t}\r\n\t};\r\n\r\n\thandleLoginSuccess = () => {\r\n\t\tthis.context.updateLoggedIn();\r\n\t\tconst { location, history } = this.props;\r\n\t\tconst destination = (location.state || {}).from || \"/\";\r\n\t\thistory.push(destination);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Section className=\"LoginPage\">\r\n\t\t\t\t<h2>Login</h2>\r\n\t\t\t\t<LoginForm onLoginSuccess={this.handleLoginSuccess} />\r\n\t\t\t</Section>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Button, Input, Required } from \"../Utils/Utils\";\r\nimport AuthApiService from \"../../services/auth-api-service\";\r\n\r\nexport default class RegistrationForm extends Component {\r\n\tstatic defaultProps = {\r\n\t\tonRegistrationSuccess: () => {}\r\n\t};\r\n\r\n\tstate = { error: null };\r\n\r\n\thandleSubmit = ev => {\r\n\t\tev.preventDefault();\r\n\t\tconst { full_name, nick_name, user_name, password } = ev.target;\r\n\t\tthis.setState({ error: null });\r\n\t\tAuthApiService.postUser({\r\n\t\t\tuser_name: user_name.value,\r\n\t\t\tpassword: password.value,\r\n\t\t\tfull_name: full_name.value,\r\n\t\t\tnickname: nick_name.value\r\n\t\t})\r\n\t\t\t.then(user => {\r\n\t\t\t\tfull_name.value = \"\";\r\n\t\t\t\tnick_name.value = \"\";\r\n\t\t\t\tuser_name.value = \"\";\r\n\t\t\t\tpassword.value = \"\";\r\n\t\t\t\tthis.props.onRegistrationSuccess();\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tthis.setState({ error: res.error });\r\n\t\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { error } = this.state;\r\n\t\treturn (\r\n\t\t\t<form className=\"RegistrationForm\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t<div role=\"alert\">{error && <p className=\"red\">{error}</p>}</div>\r\n\t\t\t\t<div className=\"full_name\">\r\n\t\t\t\t\t<label htmlFor=\"RegistrationForm__full_name\">\r\n\t\t\t\t\t\tFull name <Required />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"full_name\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tid=\"RegistrationForm__full_name\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"user_name\">\r\n\t\t\t\t\t<label htmlFor=\"RegistrationForm__user_name\">\r\n\t\t\t\t\t\tUser name <Required />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"user_name\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tid=\"RegistrationForm__user_name\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"password\">\r\n\t\t\t\t\t<label htmlFor=\"RegistrationForm__password\">\r\n\t\t\t\t\t\tPassword <Required />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tid=\"RegistrationForm__password\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"nick_name\">\r\n\t\t\t\t\t<label htmlFor=\"RegistrationForm__nick_name\">Nickname</label>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"nick_name\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tid=\"RegistrationForm__nick_name\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Button type=\"submit\">Register</Button>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Section } from '../../components/Utils/Utils'\r\nimport RegistrationForm from '../../components/RegistrationForm/RegistrationForm'\r\n\r\nexport default class RegistrationPage extends Component {\r\n  static defaultProps = {\r\n    history: {\r\n      push: () => {},\r\n    },\r\n  }\r\n\r\n  handleRegistrationSuccess = user => {\r\n    const { history } = this.props\r\n    history.push('/login')\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Section className='RegistrationPage'>\r\n        <h2>Register</h2>\r\n        <RegistrationForm\r\n          onRegistrationSuccess={this.handleRegistrationSuccess}\r\n        />\r\n      </Section>\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Section } from '../../components/Utils/Utils'\r\n\r\nexport default class NotFoundPage extends Component {\r\n  render() {\r\n    return (\r\n      <Section className='NotFoundPage'>\r\n        <h2>404 - Page not found</h2>\r\n        <p>Try going back to your previous page.</p>\r\n      </Section>\r\n    )\r\n  }\r\n}\r\n","import config from \"../config\";\r\n// import TokenService from \"./token-service\";\r\n\r\nconst FoodApiService = {\r\n\tgetFoods() {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/foods`).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t}\r\n\t// getFood(foodId) {\r\n\t// \treturn fetch(`${config.API_ENDPOINT}/foods/${foodId}`, {\r\n\t// \t\theaders: {\r\n\t// \t\t\tauthorization: `bearer ${TokenService.getAuthToken()}`\r\n\t// \t\t}\r\n\t// \t}).then(res =>\r\n\t// \t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t// \t);\r\n\t// }\r\n\t// getFoodReviews(FoodId) {\r\n\t//   return fetch(`${config.API_ENDPOINT}/Foods/${FoodId}/reviews`, {\r\n\t//     headers: {\r\n\t//       'authorization' : `bearer ${TokenService.getAuthToken()}`,\r\n\t//     },\r\n\t//   })\r\n\t//     .then(res =>\r\n\t//       (!res.ok)\r\n\t//         ? res.json().then(e => Promise.reject(e))\r\n\t//         : res.json()\r\n\t//     )\r\n\t// },\r\n\t// postReview(FoodId, text, rating) {\r\n\t//   return fetch(`${config.API_ENDPOINT}/reviews`, {\r\n\t//     method: 'POST',\r\n\t//     headers: {\r\n\t//       'authorization' : `bearer ${TokenService.getAuthToken()}`,\r\n\t//       'content-type': 'application/json',\r\n\t//     },\r\n\t//     body: JSON.stringify({\r\n\t//       Food_id: FoodId,\r\n\t//       rating,\r\n\t//       text,\r\n\t//     }),\r\n\t//   })\r\n\t//     .then(res =>\r\n\t//       (!res.ok)\r\n\t//         ? res.json().then(e => Promise.reject(e))\r\n\t//         : res.json()\r\n\t//     )\r\n\t// }\r\n};\r\n\r\nexport default FoodApiService;\r\n","import config from \"../config\";\r\n// import TokenService from \"./token-service\";\r\n\r\nconst IngredientApiService = {\r\n\tgetIngredients() {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/ingredients`).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t}\r\n\t// getIngredient(ingredientId) {\r\n\t// \treturn fetch(`${config.API_ENDPOINT}/ingredients/${ingredientId}`, {\r\n\t// \t\t// headers: {\r\n\t// \t\t// \tauthorization: `bearer ${TokenService.getAuthToken()}`\r\n\t// \t\t// }\r\n\t// \t}).then(res =>\r\n\t// \t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t// \t);\r\n\t// }\r\n\t// getFoodReviews(FoodId) {\r\n\t//   return fetch(`${config.API_ENDPOINT}/Foods/${FoodId}/reviews`, {\r\n\t//     headers: {\r\n\t//       'authorization' : `bearer ${TokenService.getAuthToken()}`,\r\n\t//     },\r\n\t//   })\r\n\t//     .then(res =>\r\n\t//       (!res.ok)\r\n\t//         ? res.json().then(e => Promise.reject(e))\r\n\t//         : res.json()\r\n\t//     )\r\n\t// },\r\n\t// postReview(FoodId, text, rating) {\r\n\t//   return fetch(`${config.API_ENDPOINT}/reviews`, {\r\n\t//     method: 'POST',\r\n\t//     headers: {\r\n\t//       'authorization' : `bearer ${TokenService.getAuthToken()}`,\r\n\t//       'content-type': 'application/json',\r\n\t//     },\r\n\t//     body: JSON.stringify({\r\n\t//       Food_id: FoodId,\r\n\t//       rating,\r\n\t//       text,\r\n\t//     }),\r\n\t//   })\r\n\t//     .then(res =>\r\n\t//       (!res.ok)\r\n\t//         ? res.json().then(e => Promise.reject(e))\r\n\t//         : res.json()\r\n\t//     )\r\n\t// }\r\n};\r\n\r\nexport default IngredientApiService;\r\n","import config from \"../config\";\r\nimport TokenService from \"./token-service\";\r\n\r\nconst RatingApiService = {\r\n\tgetRatings() {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/ratings`).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t},\r\n\tgetUserRatedFoods(userid) {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/ratings/users?userid=${userid}`, {\r\n\t\t\tmethod: \"GET\",\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: `bearer ${TokenService.getAuthToken()}`,\r\n\t\t\t\t\"content-type\": \"application/json\"\r\n\t\t\t}\r\n\t\t}).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t},\r\n\r\n\t// getIngredient(ratingId) {\r\n\t// \treturn fetch(`${config.API_ENDPOINT}/ratings/${ratingId}`, {\r\n\t// \t\t// headers: {\r\n\t// \t\t// \tauthorization: `bearer ${TokenService.getAuthToken()}`\r\n\t// \t\t// }\r\n\t// \t}).then(res =>\r\n\t// \t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t// \t);\r\n\t// }\r\n\t// getFoodReviews(FoodId) {\r\n\t//   return fetch(`${config.API_ENDPOINT}/Foods/${FoodId}/reviews`, {\r\n\t//     headers: {\r\n\t//       'authorization' : `bearer ${TokenService.getAuthToken()}`,\r\n\t//     },\r\n\t//   })\r\n\t//     .then(res =>\r\n\t//       (!res.ok)\r\n\t//         ? res.json().then(e => Promise.reject(e))\r\n\t//         : res.json()\r\n\t//     )\r\n\t// },\r\n\tpostRating(foodId, userId, rating) {\r\n\t\treturn fetch(`${config.API_ENDPOINT}/ratings/foods/${foodId}`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\tauthorization: `bearer ${TokenService.getAuthToken()}`,\r\n\t\t\t\t\"content-type\": \"application/json\"\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tfoodid: foodId,\r\n\t\t\t\trating: rating,\r\n\t\t\t\tuserid: userId\r\n\t\t\t})\r\n\t\t}).then(res =>\r\n\t\t\t!res.ok ? res.json().then(e => Promise.reject(e)) : res.json()\r\n\t\t);\r\n\t}\r\n};\r\n\r\nexport default RatingApiService;\r\n","import React, { Component } from \"react\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\nimport RatingApiService from \"../../services/rating-api-service\";\r\n\r\nimport { Button } from \"../Utils/Utils\";\r\nimport \"./RatingForm.css\";\r\n\r\nexport default class RatingForm extends Component {\r\n\tstatic contextType = FoodListContext;\r\n\r\n\tcheckRated = () => {\r\n\t\tconst { food } = this.props;\r\n\t\tconst { userRatedFoods } = this.context;\r\n\t\tconst foodids = userRatedFoods.map(food => food.foodid);\r\n\t\treturn foodids.includes(food.id);\r\n\t\t// look inside this.context.userRatedFoods for foodid = this.props.food.id\r\n\t\t// if foodid already in userRatedFoods, renderRatingDisplay\r\n\t\t// if foodid not rated in userRatedFoods, renderRatingInterface\r\n\t};\r\n\r\n\trenderRatingDisabled() {\r\n\t\treturn (\r\n\t\t\t<form\r\n\t\t\t\tclassName=\"RatingForm FoodListItem__Rating \"\r\n\t\t\t\tonSubmit={this.handleSubmit}>\r\n\t\t\t\t<label htmlFor=\"rating_thumb_up\">Thumbs Up</label>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tname=\"rating_thumb_up\"\r\n\t\t\t\t\tvalue=\"1\"\r\n\t\t\t\t\tclassName=\"form-rating-input\"\r\n\t\t\t\t\tdisabled>\r\n\t\t\t\t\tThumbs Up\r\n\t\t\t\t</Button>\r\n\t\t\t\t<label htmlFor=\"rating_thumb_down\">Thumbs Down</label>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tname=\"rating_thumb_down\"\r\n\t\t\t\t\tvalue=\"-1\"\r\n\t\t\t\t\tclassName=\"form-rating-input\"\r\n\t\t\t\t\tdisabled>\r\n\t\t\t\t\tThumbs Down\r\n\t\t\t\t</Button>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n\r\n\trenderRatingEnabled() {\r\n\t\treturn (\r\n\t\t\t<form className=\"FoodListItem__Rating\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t<label htmlFor=\"rating_thumb_up\">Thumbs Up</label>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tname=\"rating_thumb_up\"\r\n\t\t\t\t\tvalue=\"1\"\r\n\t\t\t\t\tclassName=\"form-rating-input\">\r\n\t\t\t\t\tThumbs Up\r\n\t\t\t\t</Button>\r\n\t\t\t\t<label htmlFor=\"rating_thumb_down\">Thumbs Down</label>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tname=\"rating_thumb_down\"\r\n\t\t\t\t\tvalue=\"-1\"\r\n\t\t\t\t\tclassName=\"form-rating-input\">\r\n\t\t\t\t\tThumbs Down\r\n\t\t\t\t</Button>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n\r\n\thandleSubmit = e => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst thumb_rating = e.target[0].checked ? 1 : -1;\r\n\t\tconst { food } = this.props;\r\n\t\tconst userId = localStorage.getItem(\"userid\");\r\n\t\t// need to know what user this is? how to identify\r\n\t\t// have user input name in order to rate (worst)\r\n\t\t// decode token to figure out which user is accessing\r\n\r\n\t\t// think about refresh token, how does refresh know that user is authenticated/which user it is?\r\n\t\t// localStorage.get('userID') - could be id or token or both\r\n\t\t// golden rule when it comes to localStorage, it only supports String, Boolean and Number\r\n\t\t// does not support objects or arrays - now you can stringify them .toString() for object, or JSON stringify, or Array.join(\",\")\r\n\t\t// [object Object]\r\n\t\t// localStorage.set('userID', responseJSON)  at time of login\r\n\r\n\t\tRatingApiService.postRating(food.id, userId, thumb_rating)\r\n\t\t\t.then(() => RatingApiService.getRatings())\r\n\t\t\t.then(ratings => {\r\n\t\t\t\tthis.context.setRatingsList(ratings);\r\n\t\t\t})\r\n\t\t\t.then(() =>\r\n\t\t\t\tRatingApiService.getUserRatedFoods(\r\n\t\t\t\t\twindow.localStorage.getItem(\"userid\")\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t.then(this.context.setUserRatedFoods)\r\n\t\t\t.catch(this.context.setError);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn this.checkRated()\r\n\t\t\t? this.renderRatingDisabled()\r\n\t\t\t: this.renderRatingEnabled();\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\n// import { Link } from \"react-router-dom\";\r\n// import { FoodStarRating } from \"../FoodStarRating/FoodStarRating\";\r\nimport RatingForm from \"../RatingForm/RatingForm\";\r\nimport \"./FoodListItem.css\";\r\n\r\nexport default class FoodListItem extends Component {\r\n\trender() {\r\n\t\tconst { food, ingredients, ratings } = this.props;\r\n\t\t// ratings is returned to us as array of objects, and this line matches against one of those array items.\r\n\t\t// food rating is an array with a single object in it, and we need to destructure the array portion\r\n\t\t// this problem was originally dealt with by the return of the insertRating, but this data would never be used later because database data is fetched on every refresh of the page\r\n\t\tconst [foodRating] = ratings.filter(rating => rating.foodid === food.id);\r\n\t\treturn (\r\n\t\t\t<section className=\"FoodListItem\">\r\n\t\t\t\t<div className=\"FoodListItem__details\">\r\n\t\t\t\t\t<div className=\"FoodListItem__text\">\r\n\t\t\t\t\t\t<h2 className=\"FoodListItem__heading\">\r\n\t\t\t\t\t\t\t{food.brand} {food.variety} dinner\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<ul className=\"FoodListItem__composites\">\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__kcal\">{food.kcal} kcal/can</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__grade\">\r\n\t\t\t\t\t\t\t\tPet Food Shopper Grade: {food.grade}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__rating\">\r\n\t\t\t\t\t\t\t\tRating {foodRating.rating}\r\n\t\t\t\t\t\t\t\t{/* Composite Rating, sum of \"rating\" table grouped by food.id = ratings.food_id */}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<section className=\"rating-input\">\r\n\t\t\t\t\t\t\t\t<RatingForm food={food} />\r\n\t\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<ul className=\"FoodListItem__ingredients\">\r\n\t\t\t\t\t\t\t<h3>Ingredients:</h3>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__ingredient\">\r\n\t\t\t\t\t\t\t\t{ingredients[food.i1 - 1].name}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__ingredient\">\r\n\t\t\t\t\t\t\t\t{ingredients[food.i2 - 1].name}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__ingredient\">\r\n\t\t\t\t\t\t\t\t{ingredients[food.i3 - 1].name}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__ingredient\">\r\n\t\t\t\t\t\t\t\t{ingredients[food.i4 - 1].name}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"FoodListItem__ingredient\">\r\n\t\t\t\t\t\t\t\t{ingredients[food.i5 - 1].name}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// function readableReviewCount(number) {\r\n// \tswitch (number) {\r\n// \t\tcase 0:\r\n// \t\t\treturn \"no reviews yet\";\r\n\r\n// \t\tcase 1:\r\n// \t\t\treturn `based on 1 review`;\r\n\r\n// \t\tdefault:\r\n// \t\t\treturn `based on ${number} reviews`;\r\n// \t}\r\n// }\r\n\r\n// function truncate(text) {\r\n// \tconst words = text.split(\" \");\r\n\r\n// \tif (words.length > 10) {\r\n// \t\treturn words.slice(0, 10).join(\" \") + \" ...\";\r\n// \t}\r\n\r\n// \treturn text;\r\n// }\r\n","import React, { Component } from \"react\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\nimport FoodApiService from \"../../services/food-api-service\";\r\nimport IngredientApiService from \"../../services/ingredient-api-service\";\r\nimport RatingApiService from \"../../services/rating-api-service\";\r\nimport { Section } from \"../../components/Utils/Utils\";\r\nimport FoodListItem from \"../../components/FoodListItem/FoodListItem\";\r\nimport \"./FoodList.css\";\r\n\r\nexport default class FoodList extends Component {\r\n\tstatic contextType = FoodListContext;\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.context.clearError();\r\n\t\tFoodApiService.getFoods()\r\n\t\t\t.then(this.context.setFoodList)\r\n\t\t\t.catch(this.context.setError);\r\n\t\tIngredientApiService.getIngredients()\r\n\t\t\t.then(this.context.setIngredientsList)\r\n\t\t\t.catch(this.context.setError);\r\n\t\tRatingApiService.getRatings()\r\n\t\t\t.then(this.context.setRatingsList)\r\n\t\t\t.catch(this.context.setError);\r\n\t\tRatingApiService.getUserRatedFoods(window.localStorage.getItem(\"userid\"))\r\n\t\t\t.then(this.context.setUserRatedFoods)\r\n\t\t\t.catch(this.context.setError);\r\n\t}\r\n\r\n\trenderFoods() {\r\n\t\tconst {\r\n\t\t\tfoodList = null,\r\n\t\t\tingredientsList = null,\r\n\t\t\tratingsList = null,\r\n\t\t\tuserRatedFoods = null,\r\n\t\t\tquery = null\r\n\t\t} = this.context;\r\n\r\n\t\treturn !foodList || !ingredientsList || !ratingsList || !userRatedFoods ? (\r\n\t\t\t<section className=\"foodlist\">\r\n\t\t\t\t<span className=\"status-text\">{\"Loading from server...\"}</span>\r\n\t\t\t</section>\r\n\t\t) : !query ? (\r\n\t\t\tfoodList.map(food => (\r\n\t\t\t\t<FoodListItem\r\n\t\t\t\t\tkey={food.id}\r\n\t\t\t\t\tfood={food}\r\n\t\t\t\t\tingredients={ingredientsList}\r\n\t\t\t\t\tratings={ratingsList}\r\n\t\t\t\t/>\r\n\t\t\t))\r\n\t\t) : (\r\n\t\t\tfoodList\r\n\t\t\t\t.filter(food => food.variety.includes(query))\r\n\t\t\t\t.map(food => (\r\n\t\t\t\t\t<FoodListItem\r\n\t\t\t\t\t\tkey={food.id}\r\n\t\t\t\t\t\tfood={food}\r\n\t\t\t\t\t\tingredients={ingredientsList}\r\n\t\t\t\t\t\tratings={ratingsList}\r\n\t\t\t\t\t/>\r\n\t\t\t\t))\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { error } = this.context;\r\n\t\treturn (\r\n\t\t\t<Section list className=\"FoodList\">\r\n\t\t\t\t{error ? (\r\n\t\t\t\t\t<p className=\"red\">There was an error, try again</p>\r\n\t\t\t\t) : (\r\n\t\t\t\t\tthis.renderFoods()\r\n\t\t\t\t)}\r\n\t\t\t</Section>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport FoodList from \"../FoodList/FoodList\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\nimport \"./SearchPage.css\";\r\n\r\nexport default class SearchPage extends Component {\r\n\tstatic contextType = FoodListContext;\r\n\r\n\thandleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\tconst query = e.target[0].value;\r\n\t\tthis.context.setQuery(query);\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section className=\"SearchPage\">\r\n\t\t\t\t<form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t<label htmlFor=\"search\">Search</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tclassName=\"search\"\r\n\t\t\t\t\t\tplaceholder=\"Search for Food...\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</form>\r\n\t\t\t\t<FoodList />\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default class SignInPage extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<section className=\"sign-in-page\">\r\n\t\t\t\t<Link to=\"/search\">Search Foods</Link>\r\n\t\t\t\t<section className=\"mission-statement\">\r\n\t\t\t\t\t<p className=\"problem\">\r\n\t\t\t\t\t\tPet food shopping is hard, the process of searching for foods that\r\n\t\t\t\t\t\thave the right ingredients and none of the wrong ones takes long\r\n\t\t\t\t\t\tenough. Calculating how many dollars per calorie per day your pet\r\n\t\t\t\t\t\tconsumes can vary wildly from one diet to the next, and is critical\r\n\t\t\t\t\t\tin budgeting how many dollars go towards Coco and Felix.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t{\"   \"}\r\n\t\t\t\t\t<p className=\"solution\">\r\n\t\t\t\t\t\tPet Food Shopper is here to simplify this process, removing the need\r\n\t\t\t\t\t\tfor a spreadsheet to effectively price shop pet diets. In addition,\r\n\t\t\t\t\t\tyou won't need a pet nutritionist to know what that pet food label\r\n\t\t\t\t\t\tis really telling you.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</section>\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc=\"https://cdn.theatlantic.com/assets/media/img/mt/2018/10/GettyImages_521915123/lead_720_405.jpg\"\r\n\t\t\t\t\talt=\"dog-eating-food\"\r\n\t\t\t\t/>\r\n\t\t\t</section>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Header from \"../Header/Header\";\r\nimport PrivateRoute from \"../Utils/PrivateRoute\";\r\nimport PublicOnlyRoute from \"../Utils/PublicOnlyRoute\";\r\n// import FoodList from \"../../routes/FoodList/FoodList\";\r\n// import FoodPage from \"../../routes/FoodPage/FoodPage\";\r\nimport LoginPage from \"../../routes/LoginPage/LoginPage\";\r\nimport RegistrationPage from \"../../routes/RegistrationPage/RegistrationPage\";\r\nimport NotFoundPage from \"../../routes/NotFoundPage/NotFoundPage\";\r\nimport TokenService from \"../../services/token-service\";\r\nimport AuthApiService from \"../../services/auth-api-service\";\r\nimport IdleService from \"../../services/idle-service\";\r\n\r\nimport \"./App.css\";\r\nimport SearchPage from \"../../routes/SearchPage/SearchPage\";\r\nimport SignInPage from \"../../routes/SignInPage/SignInPage\";\r\nimport FoodListContext from \"../../contexts/FoodListContext\";\r\n// import BestOfPage from \"../../routes/BestOfPage/BestOfPage\";\r\nclass App extends Component {\r\n\tstate = { hasError: false };\r\n\tstatic contextType = FoodListContext;\r\n\tstatic getDerivedStateFromError(error) {\r\n\t\tconsole.error(error);\r\n\t\treturn { hasError: true };\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tIdleService.setIdleCallback(this.logoutFromIdle);\r\n\r\n\t\tif (TokenService.hasAuthToken()) {\r\n\t\t\tthis.context.updateLoggedIn();\r\n\t\t\tIdleService.registerIdleTimerResets();\r\n\t\t\tTokenService.queueCallbackBeforeExpiry(() => {\r\n\t\t\t\tAuthApiService.postRefreshToken();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tIdleService.unRegisterIdleResets();\r\n\t\tTokenService.clearCallbackBeforeExpiry();\r\n\t}\r\n\r\n\tlogoutFromIdle = () => {\r\n\t\tTokenService.clearAuthToken();\r\n\t\tTokenService.clearUserMetadata();\r\n\t\tTokenService.clearCallbackBeforeExpiry();\r\n\t\tIdleService.unRegisterIdleResets();\r\n\t\tthis.forceUpdate();\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Header className=\"App__header\" />\r\n\t\t\t\t<main className=\"App__main\">\r\n\t\t\t\t\t<Switch className=\"left-panel\">\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={SignInPage} />\r\n\t\t\t\t\t\t<PublicOnlyRoute path=\"/login\" component={LoginPage} />\r\n\t\t\t\t\t\t<PublicOnlyRoute path=\"/register\" component={RegistrationPage} />\r\n\t\t\t\t\t\t<PrivateRoute path=\"/search\" component={SearchPage} />\r\n\t\t\t\t\t\t<Route component={NotFoundPage} />\r\n\t\t\t\t\t</Switch>\r\n\r\n\t\t\t\t\t{/* <Switch className=\"right-panel\">\r\n\t\t\t\t\t\t<Route exact path=\"/\" component={BestOfPage} />\r\n\t\t\t\t\t</Switch> */}\r\n\t\t\t\t</main>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { FoodListProvider } from \"./contexts/FoodListContext\";\r\nimport App from \"./components/App/App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n\t<BrowserRouter>\r\n\t\t<FoodListProvider>\r\n\t\t\t<App />\r\n\t\t</FoodListProvider>\r\n\t</BrowserRouter>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}